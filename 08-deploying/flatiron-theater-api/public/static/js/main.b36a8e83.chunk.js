(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(15),s=n.n(r),j=(n(23),n(18)),i=n(3),a=n(2),o=n(7),u=n(0);var b=function(e){var t=e.production,n=t.title,c=t.budget,r=t.genre,s=t.image,j=t.id;return console.log(t),Object(u.jsx)(o.b,{to:"/productions/".concat(j),children:Object(u.jsxs)("tr",{className:"table-row",children:[Object(u.jsx)("td",{children:n}),Object(u.jsx)("td",{children:r}),Object(u.jsxs)("td",{children:["$ ",c]}),Object(u.jsx)("td",{children:Object(u.jsx)("img",{style:{width:"100px"},src:s})})]})})};var l=function(e){var t=e.productions;return Object(u.jsx)("div",{children:Object(u.jsx)("table",{children:t.map((function(e){return Object(u.jsx)(b,{production:e},e.id)}))})})},O=n(6);var d=function(e){var t=e.handlePost,n=e.errors,r=Object(c.useState)({title:"",genre:"",budget:"",image:"",director:"",description:""}),s=Object(i.a)(r,2),j=s[0],a=s[1];return Object(u.jsxs)("div",{className:"App",children:[n?n.map((function(e){return Object(u.jsx)("div",{children:e})})):null,Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={title:j.title,genre:j.genre,budget:j.budget,image:j.image,director:j.director,description:j.description,ongoing:!0};t(n)},children:[Object(u.jsxs)("label",{children:["Title",Object(u.jsx)("input",{type:"text",value:j.title,onChange:function(e){return a(Object(O.a)(Object(O.a)({},j),{},{title:e.target.value}))}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["Genre",Object(u.jsx)("input",{type:"text",value:j.genre,onChange:function(e){return a(Object(O.a)(Object(O.a)({},j),{},{genre:e.target.value}))}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["Budget",Object(u.jsx)("input",{type:"number",value:j.budget,onChange:function(e){return a(Object(O.a)(Object(O.a)({},j),{},{budget:e.target.value}))}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["Image",Object(u.jsx)("input",{type:"text",value:j.image,onChange:function(e){return a(Object(O.a)(Object(O.a)({},j),{},{image:e.target.value}))}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["Director",Object(u.jsx)("input",{type:"text",value:j.director,onChange:function(e){return a(Object(O.a)(Object(O.a)({},j),{},{director:e.target.value}))}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{children:["Description",Object(u.jsx)("textarea",{type:"text",rows:"4",cols:"50",value:j.description,onChange:function(e){return a(Object(O.a)(Object(O.a)({},j),{},{description:e.target.value}))}})]}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"submit",value:"Submit Production"})]})]})};var h=function(e){e.cart;var t=e.setIsAuthenticated,n=e.setUser,c=e.user;return console.log(c),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Flatiron Theater Company"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(){t(!1),n(null)}))},children:"Logout"}),Object(u.jsx)("h1",{children:Object(u.jsx)(o.b,{to:"/",children:" Home"})}),c&&c.admin?Object(u.jsx)("h1",{children:Object(u.jsx)(o.b,{to:"/productions/new",children:"New Production"})}):null]})]})};var x=function(e){e.cart,e.setCart;var t=Object(c.useState)({crew_members:[],performers_and_roles:[]}),n=Object(i.a)(t,2),r=n[0],s=n[1],j=Object(a.f)();Object(c.useEffect)((function(){fetch("/productions/".concat(j.id)).then((function(e){return e.json()})).then((function(e){console.log(e),s(e)}))}),[]);var o=r.title,b=r.budget,l=r.genre,O=r.image,d=r.description;return r.crew_members,r.performers_and_roles,Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("h1",{children:o}),Object(u.jsx)("h3",{children:l}),Object(u.jsx)("h3",{children:b}),Object(u.jsx)("img",{style:{width:"100px"},src:O}),Object(u.jsx)("p",{children:d}),Object(u.jsx)("button",{children:"Buy Ticket"})]})};var p=function(e){var t=e.setUser,n=e.setIsAuthenticated,r=Object(c.useState)(""),s=Object(i.a)(r,2),j=s[0],a=s[1],o=Object(c.useState)(""),b=Object(i.a)(o,2),l=b[0],O=b[1],d=Object(c.useState)(""),h=Object(i.a)(d,2),x=h[0],p=h[1],g=Object(c.useState)([]),f=Object(i.a)(g,2),v=f[0],m=f[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Sign Up"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={name:j,email:l,password:x};fetch("/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){e.ok?e.json().then((function(e){t(e),n(!0)})):e.json().then((function(e){return m(e.errors)}))}))},children:[Object(u.jsxs)("label",{children:["Username",Object(u.jsx)("input",{type:"text",value:j,onChange:function(e){return a(e.target.value)}})]}),Object(u.jsxs)("label",{children:["email",Object(u.jsx)("input",{type:"text",value:l,onChange:function(e){return O(e.target.value)}})]}),Object(u.jsxs)("label",{children:["Password",Object(u.jsx)("input",{type:"password",value:x,onChange:function(e){return p(e.target.value)}})]}),Object(u.jsx)("input",{type:"submit",value:"Sign up!"})]}),Object.keys(v)?Object.keys(v).map((function(e,t){return Object(u.jsx)("div",{children:e+": "+Object.values(v)[t]})})):null]})};var g=function(e){var t=e.setUser,n=e.setIsAuthenticated,r=Object(c.useState)(""),s=Object(i.a)(r,2),j=s[0],a=s[1],o=Object(c.useState)(""),b=Object(i.a)(o,2),l=b[0],O=b[1],d=Object(c.useState)([]),h=Object(i.a)(d,2),x=h[0],g=h[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Flatiron Theater Company"}),Object(u.jsx)("h1",{children:"Login"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={username:j,password:l};fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){e.ok?e.json().then((function(e){t(e),n(!0)})):e.json().then((function(e){return g(e.error)}))}))},children:[Object(u.jsxs)("label",{children:["Username",Object(u.jsx)("input",{type:"text",value:j,onChange:function(e){return a(e.target.value)}})]}),Object(u.jsxs)("label",{children:["Password",Object(u.jsx)("input",{type:"password",value:l,onChange:function(e){return O(e.target.value)}})]}),Object(u.jsx)("input",{type:"submit",value:"Login!"})]}),x?Object(u.jsx)("div",{children:x}):null,Object(u.jsx)(p,{setUser:t,setIsAuthenticated:t})]})};var f=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(!1),o=Object(i.a)(s,2),b=o[0],O=o[1],f=Object(c.useState)([]),v=Object(i.a)(f,2),m=v[0],y=v[1],S=Object(c.useState)(!1),C=Object(i.a)(S,2),w=C[0],T=C[1],k=Object(c.useState)(null),P=Object(i.a)(k,2),U=P[0],I=P[1];return Object(c.useEffect)((function(){fetch("/authorized_user").then((function(e){e.ok&&e.json().then((function(e){T(!0),I(e)}))})),fetch("/productions").then((function(e){return e.json()})).then(r)}),[]),w?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(h,{cart:m,setIsAuthenticated:T,setUser:I,user:U}),Object(u.jsxs)(a.c,{children:[Object(u.jsx)(a.a,{exact:!0,path:"/",children:Object(u.jsx)(l,{productions:n})}),Object(u.jsx)(a.a,{exact:!0,path:"/productions/new",children:Object(u.jsx)(d,{handlePost:function(e){fetch("/productions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.errors?O(e.errors):r([].concat(Object(j.a)(n),[e]))}))},errors:b})}),Object(u.jsx)(a.a,{exact:!0,path:"/productions/:id",children:Object(u.jsx)(x,{cart:m,setCart:y})}),Object(u.jsx)(a.a,{path:"/sign_up",children:Object(u.jsx)(p,{})}),Object(u.jsx)(a.a,{path:"/login",children:Object(u.jsx)(g,{})})]})]}):Object(u.jsx)(g,{error:"please login",setIsAuthenticated:T,setUser:I})};s.a.render(Object(u.jsx)(o.a,{children:Object(u.jsx)(f,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.b36a8e83.chunk.js.map